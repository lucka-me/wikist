(function(t){function e(e){for(var s,l,c=e[0],a=e[1],o=e[2],b=0,h=[];b<c.length;b++)l=c[b],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&h.push(r[l][0]),r[l]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s]);u&&u(e);while(h.length)h.shift()();return n.push.apply(n,o||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,c=1;c<i.length;c++){var a=i[c];0!==r[a]&&(s=!1)}s&&(n.splice(e--,1),t=l(l.s=i[0]))}return t}var s={},r={app:0},n=[];function l(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=t,l.c=s,l.d=function(t,e,i){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(i,s,function(e){return t[e]}.bind(null,s));return i},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/wikist/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var o=0;o<c.length;o++)e(c[o]);var u=a;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"2c7e":function(t){t.exports=JSON.parse('{"profile":{"name":"Lucka","avatar":"https://s.gravatar.com/avatar/f03d18971cd558e09f51ad19923bf077?s=180","babels":[{"lang":"zh","level":"N"},{"lang":"en","level":2}]},"wikis":[{"url":"https://wiki.llsif.moe","user":"Lucka","title":"LoveLive School Idol Festival Wiki","base":"https://wiki.llsif.moe/%E9%A6%96%E9%A1%B5","logo":"https://www.llsif.moe/SIF_50MDL.png","server":"https://wiki.llsif.moe","articlePath":"/$1","uid":79,"registration":1520507202000,"edits":70,"lastEdit":1544796913000,"tags":["lovelive"],"forceRefresh":false},{"url":"https://zh.moegirl.org.cn","user":"卢卡","title":"萌娘百科","base":"https://zh.moegirl.org.cn/Mainpage","logo":"https://upload.wikimedia.org/wikipedia/zh/1/1d/Moegirlpedia_logo(2015).png","server":"https://zh.moegirl.org.cn","articlePath":"/$1","uid":280737,"registration":1482294114000,"edits":54,"lastEdit":1606915659000,"forceRefresh":true},{"url":"https://thwiki.cc","user":"卢卡","tags":["touhou"]},{"url":"https://zh.wikipedia.org/w","user":"卢卡"},{"url":"https://wiki.52poke.com","user":"卢卡","tags":["pokemon"]}],"project":[{"publicPath":"/wikist/"}]}')},3086:function(t,e,i){"use strict";i("36fb")},"36fb":function(t,e,i){},7844:function(t,e,i){"use strict";i("b7b8")},b7b8:function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);var s=i("7a23");const r=Object(s["g"])("header",null,[Object(s["g"])("h1",null,"Wikist")],-1),n=Object(s["g"])("div",{class:"header-adjust"},null,-1);function l(t,e,i,l,c,a){const o=Object(s["m"])("status"),u=Object(s["m"])("wiki-list");return Object(s["i"])(),Object(s["e"])(s["a"],null,[r,n,Object(s["g"])(o,{profile:t.profile,wikis:t.wikis},null,8,["profile","wikis"]),Object(s["g"])(u,{wikis:t.wikis,loading:t.loading},null,8,["wikis","loading"])],64)}var c=i("9ab4"),a=i("ce1f"),o=i("2c7e");const u={TIME_ACTIVE:2592e6,REGEXP_URL:/^https?:\/\//i};class b{constructor(){this.url="",this.user="",this.title="",this.base="",this.logo="",this.server="",this.articlePath="",this.uid=0,this.registration=0,this.edits=0,this.lastEdit=0,this.tags=[],this.forceRefresh=!1}get userPage(){return this.getArticlePath("User:"+this.user)}getArticlePath(t){return`${this.server}${this.articlePath.replace("$1",t)}`}query(){return Object(c["a"])(this,void 0,void 0,(function*(){const t=this.title.length>0&&u.REGEXP_URL.test(this.base)&&u.REGEXP_URL.test(this.logo)&&u.REGEXP_URL.test(this.server)&&this.articlePath.length>0,e=this.uid>0&&this.registration>0;if(t&&e&&!this.forceRefresh)return!0;const i=!e||this.forceRefresh,s=this.url+"/api.php?action=query"+(t?"":"&meta=siteinfo&siprop=general")+(i?"&list=users|usercontribs":"")+(i?`&ususers=${this.user}&usprop=editcount`:"")+(e?"":"|registration")+(i?`&ucuser=${this.user}&uclimit=1&ucprop=timestamp`:"")+"&format=json&origin=*";let r;try{const t=yield fetch(s);r=yield t.json()}catch(n){return t&&e}if(!t){const t=r.query.general;this.title||(this.title=t.sitename),this.base||(this.base=t.base),this.logo||(this.logo=t.logo),this.server||(this.server=t.server),/^\/\//.test(this.server)&&(this.server="https:"+this.server),this.articlePath||(this.articlePath=t.articlepath)}if(i){const t=r.query.users[0];if(e||(this.uid||(this.uid=t.userid),this.registration||(this.registration=Date.parse(t.registration))),this.edits=t.editcount,r.query.usercontribs.length>0){const t=r.query.usercontribs[0];this.lastEdit=Date.parse(t.timestamp)}}return Date.now()-this.lastEdit<u.TIME_ACTIVE&&this.tags.unshift("active"),!0}))}static parse(t){const e=new b;return e.url=t.url,e.user=t.user,t.title&&(e.title=t.title),t.base&&(e.base=t.base),t.logo&&(e.logo=t.logo),t.server&&(e.server=t.server),t.articlePath&&(e.articlePath=t.articlePath),t.uid&&(e.uid=t.uid),t.registration&&(e.registration=t.registration),t.edits&&(e.edits=t.edits),t.lastEdit&&(e.lastEdit=t.lastEdit),t.tags&&(e.tags=t.tags),t.forceUpdate&&(e.forceRefresh=t.forceUpdate),e}}const h={class:"status"},p={key:0},g={key:1},j=Object(s["g"])("span",null,"Since",-1),d={key:2},O=Object(s["g"])("span",null,"Edits",-1),f={key:3},k={class:"list"};function w(t,e,i,r,n,l){return Object(s["i"])(),Object(s["e"])("div",h,[Object(s["g"])("img",{src:t.profile.avatar,alt:"Avatar"},null,8,["src"]),Object(s["g"])("div",null,[Object(s["g"])("h2",null,Object(s["n"])(t.profile.name),1),t.wikis.length>0?(Object(s["i"])(),Object(s["e"])("span",p,[Object(s["g"])("span",null,"Wiki"+Object(s["n"])(t.wikis.length>1?"s":""),1),Object(s["g"])("span",null,Object(s["n"])(t.wikis.length),1)])):Object(s["f"])("",!0),t.wikis.length>0?(Object(s["i"])(),Object(s["e"])("span",g,[j,Object(s["g"])("span",null,Object(s["n"])(t.since),1)])):Object(s["f"])("",!0),t.wikis.length>0?(Object(s["i"])(),Object(s["e"])("span",d,[O,Object(s["g"])("span",null,Object(s["n"])(Number(t.edits).toLocaleString()),1)])):Object(s["f"])("",!0),t.profile.babels&&t.profile.babels.length>0?(Object(s["i"])(),Object(s["e"])("span",f,[Object(s["g"])("span",null,"Babel"+Object(s["n"])(t.profile.babels.length>1?"s":""),1),Object(s["g"])("span",k,[(Object(s["i"])(!0),Object(s["e"])(s["a"],null,Object(s["l"])(t.profile.babels,t=>(Object(s["i"])(),Object(s["e"])("span",{key:t.lang},Object(s["n"])(t.lang)+"-"+Object(s["n"])(t.level),1))),128))])])):Object(s["f"])("",!0)])])}var v=i("1b40");class y extends v["c"]{get since(){const t=this.wikis.reduce((t,e)=>Math.min(t,e.registration),Date.now());return new Date(t).getFullYear()}get edits(){return this.wikis.reduce((t,e)=>t+e.edits,0)}}Object(c["b"])([Object(v["b"])(Object)],y.prototype,"profile",void 0),Object(c["b"])([Object(v["b"])(Array)],y.prototype,"wikis",void 0);i("ef40");y.render=w;var m=y;const E={class:"wiki-list"},P={key:0,class:"loading"};function L(t,e,i,r,n,l){const c=Object(s["m"])("wiki-list-item");return Object(s["i"])(),Object(s["e"])("div",E,[Object(s["g"])(s["b"],{name:"wiki-list"},{default:Object(s["o"])(()=>[(Object(s["i"])(!0),Object(s["e"])(s["a"],null,Object(s["l"])(t.wikis,t=>(Object(s["i"])(),Object(s["e"])(c,{wiki:t,key:t.title},null,8,["wiki"]))),128)),t.loading?(Object(s["i"])(),Object(s["e"])("span",P,"Loading...")):Object(s["f"])("",!0)]),_:1})])}const _={class:"wiki-list-item"},S={key:0,class:"tags"},R=Object(s["g"])("span",null,"Since",-1),D={key:1},x=Object(s["g"])("span",null,"Last Edit",-1);function M(t,e,i,r,n,l){return Object(s["i"])(),Object(s["e"])("div",_,[Object(s["g"])("a",{href:t.wiki.base,title:"Homepage",target:"_blank",rel:"noopener",class:"logo"},[Object(s["g"])("img",{src:t.wiki.logo,alt:t.wiki.title},null,8,["src","alt"])],8,["href"]),Object(s["g"])("div",null,[Object(s["g"])("h2",null,Object(s["n"])(t.wiki.title),1),t.wiki.tags.length>0?(Object(s["i"])(),Object(s["e"])("span",S,[(Object(s["i"])(!0),Object(s["e"])(s["a"],null,Object(s["l"])(t.wiki.tags,t=>(Object(s["i"])(),Object(s["e"])("span",{key:t},"#"+Object(s["n"])(t),1))),128))])):Object(s["f"])("",!0),Object(s["g"])("span",null,[Object(s["g"])("a",{href:t.wiki.userPage,title:"User Page",target:"_blank",rel:"noopener"},Object(s["n"])(t.wiki.user),9,["href"]),Object(s["g"])("span",null,"#"+Object(s["n"])(t.wiki.uid),1)]),Object(s["g"])("span",null,[R,Object(s["g"])("span",null,Object(s["n"])(t.since),1)]),Object(s["g"])("span",null,[Object(s["g"])("span",null,"Edit"+Object(s["n"])(t.wiki.edits>1?"s":""),1),Object(s["g"])("span",null,Object(s["n"])(Number(t.wiki.edits).toLocaleString()),1)]),t.wiki.lastEdit>0?(Object(s["i"])(),Object(s["e"])("span",D,[x,Object(s["g"])("span",null,Object(s["n"])(t.lastEditDate),1)])):Object(s["f"])("",!0)])])}class q extends v["c"]{get lastEditDate(){return new Date(this.wiki.lastEdit).toLocaleDateString()}get since(){return new Date(this.wiki.registration).toLocaleDateString()}}Object(c["b"])([Object(v["b"])(b)],q.prototype,"wiki",void 0);i("3086");q.render=M;var A=q;let U=class extends v["c"]{};Object(c["b"])([Object(v["b"])(Boolean)],U.prototype,"loading",void 0),Object(c["b"])([Object(v["b"])(Array)],U.prototype,"wikis",void 0),U=Object(c["b"])([Object(v["a"])({components:{WikiListItem:A}})],U);var I=U;i("7844");I.render=L;var $=I;let z=class extends a["b"]{constructor(){super(...arguments),this.profile=o.profile,this.wikis=[],this.loading=!0}created(){this.query()}query(){return Object(c["a"])(this,void 0,void 0,(function*(){this.wikis.length=0;const t=[];for(const e of o.wikis){const i=b.parse(e),s=i.query().then(t=>{if(!t)return;let e=0,s=this.wikis.length;while(e<s){const t=Math.floor((e+s)/2);this.wikis[t].edits>i.edits?e=t+1:s=t}this.wikis.splice(e,0,i)});t.push(s)}yield Promise.allSettled(t),this.loading=!1}))}};z=Object(c["b"])([Object(a["a"])({components:{Status:m,WikiList:$}})],z);var T=z;i("ff46");T.render=l;var W=T;Object(s["d"])(W).mount(".app")},d9d5:function(t,e,i){},e6d0:function(t,e,i){},ef40:function(t,e,i){"use strict";i("e6d0")},ff46:function(t,e,i){"use strict";i("d9d5")}});
//# sourceMappingURL=app.0ac06c1c.js.map