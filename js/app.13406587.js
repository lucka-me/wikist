(function(e){function t(t){for(var i,r,a=t[0],l=t[1],o=t[2],b=0,O=[];b<a.length;b++)r=a[b],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&O.push(c[r][0]),c[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(O.length)O.shift()();return n.push.apply(n,o||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,a=1;a<s.length;a++){var l=s[a];0!==c[l]&&(i=!1)}i&&(n.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},c={app:0},n=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/wikist/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var o=0;o<a.length;o++)t(a[o]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"0e9c":function(e,t,s){"use strict";s("b0d4")},"28c5":function(e){e.exports=JSON.parse('{"name":"Lucka","avatar":"https://s.gravatar.com/avatar/f03d18971cd558e09f51ad19923bf077?s=180","babels":[{"lang":"zh","level":"N"},{"lang":"en","level":"2"}]}')},"65ed":function(e,t,s){},"6ab7":function(e,t,s){},"7a44":function(e){e.exports=JSON.parse('[{"url":"https://wiki.52poke.com","user":"卢卡"},{"url":"https://zh.wikipedia.org/w","user":"卢卡"},{"url":"https://zh.moegirl.org.cn","user":"卢卡"},{"url":"https://thwiki.cc","user":"卢卡"},{"url":"https://wiki.llsif.moe","user":"Lucka"}]')},b0d4:function(e,t,s){},be28:function(e,t,s){},cd49:function(e,t,s){"use strict";s.r(t);var i=s("7a23");const c=Object(i["e"])("header",null,[Object(i["e"])("h1",null,"Wikist")],-1),n=Object(i["e"])("div",{class:"header-adjust"},null,-1);function r(e,t,s,r,a,l){const o=Object(i["l"])("status"),u=Object(i["l"])("wiki-list");return Object(i["f"])(),Object(i["c"])(i["a"],null,[c,n,Object(i["e"])(o,{profile:e.profile,wikis:e.wikis},null,8,["profile","wikis"]),Object(i["e"])(u,{wikis:e.wikis},null,8,["wikis"])],64)}var a=s("9ab4"),l=s("ce1f"),o=s("28c5"),u=s("7a44");const b={TIME_MONTH:7776e6};class O{constructor(){this.url="",this.user="",this.title="",this.base="",this.logo="",this.server="",this.articlePath="",this.uid=0,this.registration=0,this.edits=0,this.lastEdit=0,this.tags=[]}query(e){const t=this.url+"/api.php?action=query&meta=siteinfo&siprop=general&list=users|usercontribs"+`&ususers=${this.user}&usprop=editcount|registration`+`&ucuser=${this.user}&uclimit=1&ucprop=timestamp&format=json&origin=*`;fetch(t).then(e=>e.json()).then(t=>{const s=t.query.general;this.title=s.sitename,this.base=s.base,this.logo=s.logo,this.server=s.server,this.server.match(/^\/\//)&&(this.server="https:"+this.server),this.articlePath=`${this.server}${s.articlepath}`;const i=t.query.users[0];if(this.uid=i.userid,this.registration=Date.parse(i.registration),this.edits=i.editcount,t.query.usercontribs.length>0){const e=t.query.usercontribs[0];this.lastEdit=Date.parse(e.timestamp),Date.now()-this.lastEdit<b.TIME_MONTH&&this.tags.push("active")}e(!0)}).catch(()=>e(!1))}get lastEditDate(){return new Date(this.lastEdit).toLocaleDateString()}get since(){return new Date(this.registration).toLocaleDateString()}get userPage(){return this.articlePath.replace("$1","User:"+this.user)}static parse(e){const t=new O;return t.url=e.url,t.user=e.user,t}}var p;(function(e){function t(){e.wikis.length=0;let t=0;for(const i of u){const c=O.parse(i);c.query(i=>{i&&e.wikis.push(c),t+=1,t===u.length&&s()})}}function s(){e.wikis.sort((e,t)=>t.edits-e.edits),e.events.idle()}e.profile=o,e.wikis=[],e.events={idle:()=>{}},e.start=t})(p||(p={}));const j=Object(i["n"])("data-v-7d2447d1");Object(i["i"])("data-v-7d2447d1");const d={class:"status"},h={key:0},f={key:1},k=Object(i["e"])("span",null,"Since",-1),g={key:2},w=Object(i["e"])("span",null,"Edits",-1),v={class:"list"};Object(i["g"])();const m=j((e,t,s,c,n,r)=>(Object(i["f"])(),Object(i["c"])("div",d,[Object(i["e"])("img",{src:e.profile.avatar,alt:"Avatar"},null,8,["src"]),Object(i["e"])("div",null,[Object(i["e"])("h2",null,Object(i["m"])(e.profile.name),1),e.wikis.length>0?(Object(i["f"])(),Object(i["c"])("span",h,[Object(i["e"])("span",null,"Wiki"+Object(i["m"])(e.wikis.length>1?"s":""),1),Object(i["e"])("span",null,Object(i["m"])(e.wikis.length),1)])):Object(i["d"])("",!0),e.wikis.length>0?(Object(i["f"])(),Object(i["c"])("span",f,[k,Object(i["e"])("span",null,Object(i["m"])(e.since),1)])):Object(i["d"])("",!0),e.wikis.length>0?(Object(i["f"])(),Object(i["c"])("span",g,[w,Object(i["e"])("span",null,Object(i["m"])(Number(e.edits).toLocaleString()),1)])):Object(i["d"])("",!0),Object(i["e"])("span",null,[Object(i["e"])("span",null,"Babel"+Object(i["m"])(e.profile.babels.length>1?"s":""),1),Object(i["e"])("span",v,[(Object(i["f"])(!0),Object(i["c"])(i["a"],null,Object(i["k"])(e.profile.babels,e=>(Object(i["f"])(),Object(i["c"])("span",{key:e.lang},Object(i["m"])(e.lang)+"-"+Object(i["m"])(e.level),1))),128))])])])])));let y=class extends l["b"]{get since(){const e=this.wikis.reduce((e,t)=>Math.min(e,t.registration),Date.now());return new Date(e).getFullYear()}get edits(){return this.wikis.reduce((e,t)=>e+t.edits,0)}};y=Object(a["a"])([Object(l["a"])({props:{profile:Object,wikis:Array}})],y);var _=y;s("f224");_.render=m,_.__scopeId="data-v-7d2447d1";var S=_;const P=Object(i["n"])("data-v-1886254b");Object(i["i"])("data-v-1886254b");const x={class:"wiki-list"},E={key:0,class:"loading"};Object(i["g"])();const D=P((e,t,s,c,n,r)=>{const a=Object(i["l"])("wiki-list-item");return Object(i["f"])(),Object(i["c"])("div",x,[e.wikis.length<1?(Object(i["f"])(),Object(i["c"])("span",E,"Loading...")):Object(i["d"])("",!0),(Object(i["f"])(!0),Object(i["c"])(i["a"],null,Object(i["k"])(e.wikis,e=>(Object(i["f"])(),Object(i["c"])(a,{wiki:e,key:e.title},null,8,["wiki"]))),128))])}),L=Object(i["n"])("data-v-502c47d1");Object(i["i"])("data-v-502c47d1");const M={class:"wiki-list-item"},q={key:0,class:"tags"},N=Object(i["e"])("span",null,"Since",-1),I={key:1},T=Object(i["e"])("span",null,"Last Edit",-1);Object(i["g"])();const $=L((e,t,s,c,n,r)=>(Object(i["f"])(),Object(i["c"])("div",M,[Object(i["e"])("img",{src:e.wiki.logo,alt:"Logo"},null,8,["src"]),Object(i["e"])("div",null,[Object(i["e"])("h2",null,[Object(i["e"])("a",{href:e.wiki.base,title:"Homepage",target:"_blank",rel:"noopener"},Object(i["m"])(e.wiki.title),9,["href"])]),e.wiki.tags.length>0?(Object(i["f"])(),Object(i["c"])("span",q,[(Object(i["f"])(!0),Object(i["c"])(i["a"],null,Object(i["k"])(e.wiki.tags,e=>(Object(i["f"])(),Object(i["c"])("span",{key:e},"#"+Object(i["m"])(e),1))),128))])):Object(i["d"])("",!0),Object(i["e"])("span",null,[Object(i["e"])("a",{href:e.wiki.userPage,title:"User Page",target:"_blank",rel:"noopener"},Object(i["m"])(e.wiki.user),9,["href"]),Object(i["e"])("span",null,"#"+Object(i["m"])(e.wiki.uid),1)]),Object(i["e"])("span",null,[N,Object(i["e"])("span",null,Object(i["m"])(e.wiki.since),1)]),Object(i["e"])("span",null,[Object(i["e"])("span",null,"Edit"+Object(i["m"])(e.wiki.edits>1?"s":""),1),Object(i["e"])("span",null,Object(i["m"])(Number(e.wiki.edits).toLocaleString()),1)]),e.wiki.lastEdit>0?(Object(i["f"])(),Object(i["c"])("span",I,[T,Object(i["e"])("span",null,Object(i["m"])(e.wiki.lastEditDate),1)])):Object(i["d"])("",!0)])])));let J=class extends l["b"]{};J=Object(a["a"])([Object(l["a"])({props:{wiki:O}})],J);var W=J;s("e94d");W.render=$,W.__scopeId="data-v-502c47d1";var z=W;let A=class extends l["b"]{};A=Object(a["a"])([Object(l["a"])({props:{wikis:Array},components:{WikiListItem:z}})],A);var H=A;s("0e9c");H.render=D,H.__scopeId="data-v-1886254b";var U=H;let B=class extends l["b"]{constructor(){super(...arguments),this.profile=p.profile,this.wikis=[]}created(){p.events.idle=()=>{this.wikis=p.wikis},p.start()}};B=Object(a["a"])([Object(l["a"])({components:{Status:S,WikiList:U}})],B);var F=B;s("ce91");F.render=r;var Y=F;Object(i["b"])(Y).mount(".app")},ce91:function(e,t,s){"use strict";s("be28")},e94d:function(e,t,s){"use strict";s("65ed")},f224:function(e,t,s){"use strict";s("6ab7")}});
//# sourceMappingURL=app.13406587.js.map